$(function(){$.fn.cpLightimg=function(){var i,t,a,l,n,h,e,o,r=this[0],g=function(){$("div.cp-lightoverlay").removeClass("cp-lightoverlay-in"),$("img.cp-lightimg").css("transform",""),setTimeout(function(){$("div.cp-lightoverlay").remove(),$("img.cp-lightimg").removeClass("cp-lightimg")},300),$(window).unbind("scroll",g)};return $(window).scroll(g),$(r).hasClass("cp-lightimg")?g():(i=r.naturalWidth>$("body").width()-40?$("body").width()-40:r.naturalWidth,h=r.naturalHeight>window.innerHeight-40?window.innerHeight-40:r.naturalHeight,t=$("body").width()/2-r.width/2-$(r).offset().left,a=window.innerHeight/2-r.height/2-$(r).offset().top+$("html").scrollTop(),e=i/r.width,l=h/r.height,r.naturalWidth>r.naturalHeight?l=(n=i/r.naturalWidth*r.naturalHeight)/r.height:(e=(h=h/r.naturalHeight*r.naturalWidth)/r.width,i<h&&(l=(n=i/r.naturalWidth*r.naturalHeight)/r.height,e=(h=n/r.naturalHeight*r.naturalWidth)/r.width)),$(r).addClass("cp-lightimg").css("transform",`translate(${t}px, ${a}px) scale(${e}, ${l})`),o=$('<div class="cp-lightoverlay"><div>'),$("body").append(o),setTimeout(function(){o.addClass("cp-lightoverlay-in"),o.click(g)},10)),this},$("<style>img.cp-lightimg {position: relative;transition: all 300ms;z-index: 1001;box-shadow: rgba(0, 0, 0, 0.2) 2px 2px 3px;}div.cp-lightoverlay {position: fixed;background: rgba(0, 0, 0, 0.7);top: 0;left: 0;right: 0;bottom: 0;z-index: 1000;opacity: 0;transition: all 300ms;}div.cp-lightoverlay.cp-lightoverlay-in {opacity: 1;}</style>").appendTo("head")});